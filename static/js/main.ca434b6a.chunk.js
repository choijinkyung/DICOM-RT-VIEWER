(this.webpackJsonpuntitled5=this.webpackJsonpuntitled5||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){e.exports=n(27)},24:function(e,t,n){},25:function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(18),o=n.n(l),i=(n(24),n(7)),c=n(8),s=n(11),u=n(12),m=(n(25),n(26),n(6)),d=n(1),g=n(2),f=n(9),v=n(4),p=n(10),E=n.n(p),x=n(5),h=n.n(x);n(17);var y=function(e){try{document.getElementById("patient").textContent="Patient ID : "+e.data.string("x00100020"),document.getElementById("topleft").textContent="Patient Name : "+e.data.string("x00100010")+"\nPatient Sex : "+e.data.string("x00100040"),document.getElementById("topright").textContent="Modality : "+e.data.string("x00080060"),document.getElementById("modality").textContent="Modality : "+e.data.string("x00080060"),document.getElementById("instanceUID").textContent="Instance UID : "+e.data.string("x00080018")}catch(t){alert("parsing error")}};var b=function(e){if("CT"===e.data.string("x00080060")){var t=e.data.string("x00200032").split("\\"),n=10*parseFloat(t[0])/10,a=10*parseFloat(t[1])/10,r=10*parseFloat(t[2])/10,l=e.data.string("x00200037"),o=(l=l.toString()).split("\\"),i=10*parseFloat(o[0])/10,c=10*parseFloat(o[1])/10,s=10*parseFloat(o[2])/10,u=10*parseFloat(o[3])/10,m=10*parseFloat(o[4])/10,g=10*parseFloat(o[5])/10,f=e.data.string("x00280030"),v=(f=f.toString()).split("\\"),p=parseFloat(10*v[0])/10,E=parseFloat(10*v[1])/10,x=document.getElementById("dicomImage");return x.addEventListener("mousemove",(function(e){var t=d.pageToPixel(x,e.pageX,e.pageY);document.getElementById("coords").textContent="pageX="+e.pageX+", pageY="+e.pageY+", pixelX="+t.x+", pixelY="+t.y;var l=i*p*t.x+u*E*t.y+n,o=c*p*t.x+m*E*t.y+a,f=s*p*t.x+g*E*t.y+r;l=Math.floor(10*l)/10,o=Math.floor(10*o)/10,f=Math.floor(10*f)/10,document.getElementById("voxelCoords").textContent="Px = "+l+", Py = "+o+", Pz = "+f})),x.addEventListener("dblclick",(function(e){var t=d.pageToPixel(x,e.pageX,e.pageY);document.getElementById("pixelValue").textContent="pageX="+e.pageX+", pageY="+e.pageY+", pixelX="+t.x+", pixelY="+t.y;var l=i*p*t.x+u*E*t.y+n,o=c*p*t.x+m*E*t.y+a,f=s*p*t.x+g*E*t.y+r;l=Math.floor(10*l)/10,o=Math.floor(10*o)/10,f=Math.floor(10*f)/10,document.getElementById("voxelValue").textContent="Px = "+l+", Py = "+o+", Pz = "+f})),[n,a,p,E]}alert("NOT CT IMAGES")};var w=n(3),I=n.n(w);var C=function(e){e.forEach((function(e){var t=document.getElementById("ul"),n=document.createElement("li"),a=document.createElement("input");a.type="checkbox",a.value=e.x30060022,a.name="roi",a.class="roiSet",n.append(a);var r=e.x30060026;n.append(document.createTextNode(r)),t.append(n)}))};var T,B=function(e,t){for(var n=t.split("\\"),a=[],r=[],l=[],o=0;o<n.length;o++)o%3===0?a[o]=n[o]:o%3===1?r[o]=n[o]:o%3===2&&(l[o]=n[o]);for(var i=b(e),c=i[0],s=i[1],u=i[2],m=i[3],d=[],g=[],f=0;f<n.length;f++)f%3===0?d[f]=Math.floor((a[f]-c)/u*10)/10:f%3===1&&(g[f]=Math.floor((r[f]-s)/m*10)/10);return[d,g]},M=function(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t},k=function(e){var t=(e=e.split("\\"))[0],n=e[1],a=e[2];return"#"+M(t)+M(n)+M(a)};function R(e){return/^[\x00-\x7F]*$/.test(e)}function L(e){document.getElementById("rtstruct").innerHTML="",document.getElementById("rtstruct3").innerHTML="",I()("#status").removeClass("alert-warning alert-success alert-danger").addClass("alert-info"),I()("#warnings").empty(),document.getElementById("statusText2").innerHTML="Status: Loading file, please wait..";var t=new FileReader;return t.onload=function(e){var n=t.result,a=new Uint8Array(n),r=a.length/1024,l=r/1024,o=l>1?l.toFixed(3)+" MB":r.toFixed(0)+" KB";document.getElementById("statusText2").innerHTML="Status: Parsing "+o+" bytes, please wait..",setTimeout((function(){try{var e=(new Date).getTime();T=h.a.parseDicom(a);var t=[],n=[];N(T),P(T,t,n),function(e){for(var t=[],n=[],a=0;a<e.length;a++)"x30060022"==e[a]?t[a]=e[a+1]:"x30060026"==e[a]&&(n[a]=e[a+1]);t=t.filter((function(e){return null!==e&&void 0!==e&&""!==e})),n=n.filter((function(e){return null!==e&&void 0!==e&&""!==e})),I()((function(){for(var e=new Array,a=0;a<n.length;a++){var r=new Object;r.x30060022=t[a],r.x30060026=n[a],e.push(r)}C(e)}))}(S),function(e){for(var t=[],n=[],a=[],r=[],l=0;l<e.length;l++){var o=0;if("x00081155"==e[l+2]){if(t[l]=e[l+3],n[l]=e[l+5],"x30060084"==e[l+6])a[l]=e[l+7];else if("x00081155"==e[l+6])for(o=l+6;o<e.length;o++)if("x30060084"==e[o+2]){a[l]=e[o+3];break}if("x3006002a"==e[l])r[l]=e[l+1];else if("x30060050"==e[l])for(o=l;o>0;o--)if("x3006002a"==e[o]){r[l]=e[o+1];break}}}r=r.filter((function(e){return null!==e&&void 0!==e&&""!==e})),t=t.filter((function(e){return null!==e&&void 0!==e&&""!==e})),n=n.filter((function(e){return null!==e&&void 0!==e&&""!==e})),a=a.filter((function(e){return null!==e&&void 0!==e&&""!==e})),I()((function(){for(var l=0;l<e.length;l++){var o={};o.x30060084=a[l],o.x00081155=t[l],o.x30060050=n[l],o.x3006002a=r[l],j.push(o)}}))}(V),I()(document).ready((function(){I()(':checkbox[name="roi"]').click((function(){I()(".roi").prop("checked")?(I()(".roi").prop("checked",!1),alert("\uccb4\ud06c\ubc15\uc2a4 \uccb4\ud06c \ud574\uc81c!")):(alert("\uccb4\ud06c\ubc15\uc2a4 \uccb4\ud06c\ud588\uc74c!"),I()(".roi").prop("checked",!0))}))})),document.getElementById("rtstruct").innerHTML="<ul>"+t.join("")+"</ul>",document.getElementById("rtstruct3").innerHTML="<ul>"+n.join("")+"</ul>";var r=(new Date).getTime()-e;if(T.warnings.length>0)I()("#status1").removeClass("alert-success alert-info alert-danger").addClass("alert-warning"),I()("#statusText2").html("Status: Warnings encountered while parsing file (file of size "+o+" parsed in "+r+"ms)"),T.warnings.forEach((function(e){I()("#warnings").append("<li>"+e+"</li>")}));else T.elements.x7fe00010?(I()("#status1").removeClass("alert-warning alert-info alert-danger").addClass("alert-success"),I()("#statusText").html("Status: Ready (file of size "+o+" parsed in "+r+"ms)")):(I()("#status1").removeClass("alert-warning alert-info alert-danger").addClass("alert-success"),I()("#statusText2").html("Status: Ready - no pixel data found (file of size "+o+" parsed in "+r+"ms)"))}catch(s){var l=s;if(s.exception&&(l=s.exception),I()("#status").removeClass("alert-success alert-info alert-warning").addClass("alert-danger"),document.getElementById("statusText2").innerHTML="Status: Error - "+l+" (file of size "+o+" )",s.output1||s.output3)document.getElementById("rtstruct").innerHTML="<ul>"+i.join("")+"</ul>",document.getElementById("rtstruct3").innerHTML="<ul>"+c.join("")+"</ul>";else if(s.dataSet){var i=[],c=[];N(s.dataSet),P(s.dataSet,i,c),document.getElementById("rtstruct").innerHTML="<ul>"+i.join("")+"</ul>",document.getElementById("rtstruct3").innerHTML="<ul>"+c.join("")+"</ul>"}}}),10)},t.readAsArrayBuffer(e),T}var S=[];function N(e){try{var t=function(t){var n=e.elements[t];if("x30060020"===n.tag||"x30060022"===n.tag||"x30060026"===n.tag){n.tag;n.hadUndefinedLength&&" <strong>(-1)</strong>","; ",n.vr&&" VR="+n.vr+"; ";if(n.items)n.items.forEach((function(e){N(e.dataSet)}));else if(n.fragments){var a=0;n.fragments.forEach((function(e){var t;n.basicOffsetTable&&(t=n.basicOffsetTable[a]);a++,e.offset;e.length}))}else{2===n.length?" ("+e.uint16(t)+")":4===n.length&&" ("+e.uint32(t)+")";var r=e.string(t);R(r)?void 0!==r&&'"'+r+'"':2!==n.length&&4!==n.length&&("#C8C8C8","<i>binary data</i>"),0===n.length&&"#C8C8C8",S.push(n.tag,e.string(t))}}};for(var n in e.elements)t(n)}catch(a){throw{exception:a}}}var V=[];function P(e,t,n){try{var a=function(a){var r=e.elements[a];if("x30060039"===r.tag||"x3006002a"===r.tag||"x30060040"===r.tag||"x30060050"===r.tag||"x30060016"===r.tag||"x00081155"===r.tag||"x30060084"===r.tag){r.tag;r.hadUndefinedLength&&" <strong>(-1)</strong>","; ",r.vr&&" VR="+r.vr+"; ";if(r.items){r.items.forEach((function(e){P(e.dataSet,t,n)}))}else if(r.fragments){var l=0;r.fragments.forEach((function(e){var t;r.basicOffsetTable&&(t=r.basicOffsetTable[l]);l++,e.offset;e.length}))}else{2===r.length?" ("+e.uint16(a)+")":4===r.length&&" ("+e.uint32(a)+")";var o=e.string(a);R(o)?void 0!==o&&'"'+o+'"':2!==r.length&&4!==r.length&&("#C8C8C8","<i>binary data</i>"),0===r.length&&"#C8C8C8",V.push(r.tag,e.string(a))}}};for(var r in e.elements)a(r)}catch(l){throw{exception:l,output3:n}}return V}var O,F,j=new Array;var D,A;function W(e){var t;t=e.data.string("x00080018");for(var n=0;n<j.length;n++)13==j[n].x30060084&&j[n].x00081155==t&&(O=j[n].x30060050,F=j[n].x3006002a,H(e,O,F))}function H(e,t,n){var a=B(e,t),r=a[0],l=a[1];D=document.getElementById("myCanvas"),(A=D.getContext("2d")).beginPath(),A.moveTo(r[0],l[1]);for(var o=1;o<=3*r.length;o++)o%3===0&&A.lineTo(r[o],l[o+1]);return A.closePath(),A.stroke(),A.fillStyle=k(n),A.globalAlpha=.7,A.fill(),D}function Y(){D=document.getElementById("myCanvas"),(A=D.getContext("2d")).clearRect(0,0,D.width,D.height)}v.external.cornerstone=d,v.external.dicomParser=h.a,g.external.cornerstone=d,g.external.Hammer=E.a,g.external.cornerstoneMath=f,g.init();var z,X=72;function U(e,t){var n=document.getElementById("dicomImage");return d.enable(n),X=t,d.loadImage(e[X]).then((function(e){var t=d.getDefaultViewportForImage(n,e);"CT"===e.data.string("x00080060")||"ct"===e.data.string("x00080060")||"MRI"===e.data.string("x00080060")?(d.displayImage(n,e,t),y(e),b(e),W(e),z=e):alert("ERROR: Confirm this image's modality : CT , MRI ... ")})),z}function J(e){var t=document.getElementById("dicomImage");return d.enable(t),d.loadImage(e).then((function(e){var n=d.getDefaultViewportForImage(t,e);"CT"===e.data.string("x00080060")||"ct"===e.data.string("x00080060")||"MRI"===e.data.string("x00080060")?(d.displayImage(t,e,n),y(e),b(e),W(e),z=e):alert("ERROR: Confirm this image's modality : CT , MRI ... ")})),z}function Z(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;L(t[0]),J(v.wadouri.fileManager.add(t[0]))}function $(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}v.external.cornerstone=d,v.external.dicomParser=h.a,g.external.cornerstone=d,g.external.Hammer=E.a,g.external.cornerstoneMath=f,g.init();var q=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.element,t=document.getElementById("dicomImage");t.addEventListener("dragover",$,!1),t.addEventListener("drop",Z,!1),e.addEventListener("mousedown",(function(t){var n=t.pageX,a=t.pageY,r=t.which;function l(t){var l=t.pageX-n,o=t.pageY-a;if(n=t.pageX,a=t.pageY,1===r){var i=d.getViewport(e);i.voi.windowWidth+=l/i.scale,i.voi.windowCenter+=o/i.scale,d.setViewport(e,i),document.getElementById("bottomleft").textContent="WW/WC:"+Math.round(i.voi.windowWidth)+"/"+Math.round(i.voi.windowCenter)}else if(2===r){var c=d.getViewport(e);c.translation.x+=l/c.scale,c.translation.y+=o/c.scale,d.setViewport(e,c)}else if(3===r){var s=d.getViewport(e);s.scale+=o/100,d.setViewport(e,s),document.getElementById("bottomright").textContent="Zoom:"+s.scale+"x"}}document.addEventListener("mousemove",l),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",e)}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"outsideWrapper",className:"outsideWrapper"},r.a.createElement("div",null,"File Select =>",r.a.createElement("input",{type:"file",onChange:function(e){!function(e){e.stopPropagation(),e.preventDefault();var t=e.target.files;L(t[0]),J(v.wadouri.fileManager.add(t[0]))}(e)}}),"\xa0\xa0"),r.a.createElement("div",null,"Directory Select =>",r.a.createElement("input",{type:"file",id:"filepicker",name:"fileList",webkitdirectory:"",directory:"",multiple:!0,onChange:function(e){!function(e){for(var t=[],n=[],a=0,r=0;r<1e6;r++)t[r]=v.wadouri.fileManager.add(e.target.files[r]),n[r]=e.target.files[r],a>1e6&&alert("ERROR : There are Too many files."),a++;L(n[113]),U(t,X),document.getElementById("dicomImage").onwheel=function(e){e.stopPropagation(),e.preventDefault();var n=X;n>=0||n<t.length?e.deltaY<0?n===X&&(U(t,X+1),Y()):n===X&&(U(t,X-1),Y()):(n=X,U(t,X),Y());return!1}}(e)}})),r.a.createElement("ul",{id:"listing"}),r.a.createElement("button",{onClick:function(){J("dicomweb://s3.amazonaws.com/lury/PTCTStudy/1.3.6.1.4.1.25403.52237031786.3872.20100510032220.11.dcm")}},"TEST"),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){!function(){var e=g.AngleTool;g.addTool(e),g.setToolActive("Angle",{mouseButtonMask:1})}()}},"Angle"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=g.LengthTool;g.addTool(e),g.setToolActive("Length",{mouseButtonMask:1})}()}},"Length"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=g.EllipticalRoiTool;g.addTool(e),g.setToolActive("EllipticalRoi",{mouseButtonMask:1})}()}},"Circle"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=g.RectangleRoiTool;g.addTool(e),g.setToolActive("RectangleRoi",{mouseButtonMask:1})}()}},"Rectangle"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=g.EraserTool;g.addTool(e),g.setToolActive("Eraser",{mouseButtonMask:1})}()}},"Erase"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=document.getElementById("dicomImage");e.style.width="256px",e.style.height="256px",d.resize(e)}()}},"256x256"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=document.getElementById("dicomImage");e.style.width="512px",e.style.height="512px",d.resize(e)}()}},"512x512"),"\xa0\xa0"),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){!function(){var e=document.getElementById("dicomImage"),t=d.getViewport(e);t.invert=!t.invert,d.setViewport(e,t)}()}},"Toggle Invert"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=document.getElementById("dicomImage"),t=d.getViewport(e);t.pixelReplication=!t.pixelReplication,d.setViewport(e,t)}()}},"Toggle Interpolation"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=document.getElementById("dicomImage"),t=d.getViewport(e);t.hflip=!t.hflip,d.setViewport(e,t)}()}},"Horizontal Flip"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=document.getElementById("dicomImage"),t=d.getViewport(e);t.vflip=!t.vflip,d.setViewport(e,t)}()}},"Vertical Flip"),"\xa0\xa0",r.a.createElement("button",{onClick:function(){!function(){var e=document.getElementById("dicomImage"),t=d.getViewport(e);t.rotation+=90,d.setViewport(e,t)}()}},"Rotate 90"),"\xa0\xa0"),r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,"Left click drag - window/level"),r.a.createElement("li",null,"Middle Mouse button drag - pan"),r.a.createElement("li",null,"Right click drag - zoom"),r.a.createElement("li",null,"Mouse wheel - scroll images"),r.a.createElement("li",null,"Double Click - save pixel/voxel"))),r.a.createElement("div",null,r.a.createElement("div",{class:"left"},r.a.createElement("div",{id:"dicomImageWrapper",className:"wrapper",onContextMenu:"return false",onWheel:function(e){}},r.a.createElement("div",{id:"dicomImage",className:"viewportElement",ref:function(t){e.element=t}},r.a.createElement("canvas",{id:"myCanvas",className:"canvas",width:512,height:512})),r.a.createElement("div",Object(m.a)({id:"topleft",className:"overlay"},"className","topleft"),"Patient Name: Patient Sex:"),r.a.createElement("div",Object(m.a)({id:"topright",className:"overlay"},"className","topright"),"Modality :"),r.a.createElement("div",Object(m.a)({id:"bottomleft",className:"overlay"},"className","bottomleft"),"WW/WC:"),r.a.createElement("div",Object(m.a)({id:"bottomright",className:"overlay"},"className","bottomright"),"Zoom:")))),r.a.createElement("div",{className:"right"},r.a.createElement("div",null,r.a.createElement("span",{id:"coords"})),r.a.createElement("div",null,r.a.createElement("span",{id:"voxelCoords"},"voxel")),r.a.createElement("div",null,r.a.createElement("span",{id:"pixelValue"})),r.a.createElement("div",null,r.a.createElement("span",{id:"voxelValue"})),r.a.createElement("div",null,r.a.createElement("span",{id:"patient"},"Patient ID : ")),r.a.createElement("div",null,r.a.createElement("span",{id:"modality"},"Modality : ")),r.a.createElement("div",null,r.a.createElement("span",{id:"instanceUID"},"Instance UID : ")),r.a.createElement("div",null,r.a.createElement("span",{id:"contour"},"contourData : ")),r.a.createElement("div",null,r.a.createElement("ul",{id:"ul"},"Structure Set ROI Sequence"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",{className:"left"},r.a.createElement("div",{id:"status1",className:"alert alert-success"},r.a.createElement("div",{id:"statusText2"},"Status: Ready (no file loaded)"),r.a.createElement("ul",{id:"warnings"})),r.a.createElement("div",{className:"row2"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{id:"rtstruct"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h3",null,"item")))))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"row2"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{id:"rtstruct3"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h3",null,"contour data"))))))))}}]),n}(r.a.Component),G=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(q,null))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.ca434b6a.chunk.js.map